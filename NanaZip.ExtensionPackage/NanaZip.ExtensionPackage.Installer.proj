<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.Build.NoTargets/3.7.56" DefaultTargets="Restore;Build">
  <Import Project="..\NanaZip.Project\NanaZip.Project.props" />
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <Version>$(MileProjectVersion)</Version>
    <InstallerInputPath>$(MSBuildThisFileDirectory)..\Output\Binaries\$(Configuration)</InstallerInputPath>
    <InstallerOutputPath>$(MSBuildThisFileDirectory)..\Output</InstallerOutputPath>
  </PropertyGroup>

  <!-- NOTE: verify Tools.InnoSetup package binaries with official binaries every upgrade -->
  <ItemGroup>
    <PackageReference Include="Tools.InnoSetup" Version="6.4.3" />
  </ItemGroup>

  <Target Name="BuildInstaller" BeforeTargets="AfterBuild">
    <Exec Command='"$(InnoSetupCompiler)" "$(MSBuildProjectName).iss" "/DAppVersion=$(Version)" "/DInputPath=$(InstallerInputPath)" "/O$(InstallerOutputPath)"' />
  </Target>
</Project>
